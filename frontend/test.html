<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØªØ³Øª HDP</title>
    <style>
        body { font-family: Tahoma; padding: 20px; background: #0c2461; color: white; }
        .container { max-width: 800px; margin: 0 auto; }
        .card { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 10px 0; }
        button { background: #00ff88; color: #0c2461; border: none; padding: 10px 20px; border-radius: 5px; margin: 5px; cursor: pointer; }
        .result { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 5px; margin-top: 10px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ØªØ³Øª Ø³ÛŒØ³ØªÙ… HDP</h1>
        
        <div class="card">
            <h3>ğŸ”— ÙˆØ¶Ø¹ÛŒØª Ø§ØªØµØ§Ù„:</h3>
            <p>Frontend: <span id="frontend-status">âœ… Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§</span></p>
            <p>Backend: <span id="backend-status">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...</span></p>
        </div>
        
        <div class="card">
            <h3>ğŸ“¡ ØªØ³Øª APIâ€ŒÙ‡Ø§:</h3>
            <button onclick="testApi('health')">ğŸ”§ ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ…</button>
            <button onclick="testApi('stats')">ğŸ“Š Ø¢Ù…Ø§Ø±</button>
            <button onclick="testApi('drivers')">ğŸš— Ø±Ø§Ù†Ù†Ø¯Ú¯Ø§Ù†</button>
            <button onclick="testApi('map/drivers')">ğŸ—ºï¸ Ù…ÙˆÙ‚Ø¹ÛŒØªâ€ŒÙ‡Ø§</button>
            <button onclick="testApi('ai/predict')">ğŸ¤– Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ AI</button>
        </div>
        
        <div class="card">
            <h3>ğŸ“ Ù†ØªÛŒØ¬Ù‡ ØªØ³Øª:</h3>
            <div id="result" class="result">Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ³Øª...</div>
        </div>
    </div>
    
    <script>
        const API_BASE = 'http://localhost:3000/api';
        
        // ØªØ³Øª ÙˆØ¶Ø¹ÛŒØª Backend
        async function checkBackend() {
            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                document.getElementById('backend-status').innerHTML = 
                    `âœ… ÙØ¹Ø§Ù„ (Ù†Ø³Ø®Ù‡: ${data.version})`;
            } catch (error) {
                document.getElementById('backend-status').innerHTML = 
                    `âŒ Ø®Ø·Ø§: ${error.message}`;
            }
        }
        
        // ØªØ³Øª API
        async function testApi(endpoint) {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = `â³ Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª /api/${endpoint}...`;
            
            try {
                const response = await fetch(`${API_BASE}/${endpoint}`);
                const data = await response.json();
                
                resultDiv.innerHTML = `
                    âœ… ØªØ³Øª Ù…ÙˆÙÙ‚
                    <br><br>
                    <strong>Endpoint:</strong> /api/${endpoint}
                    <br>
                    <strong>Status:</strong> ${response.status}
                    <br>
                    <strong>Data:</strong>
                    <pre style="background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px; overflow: auto;">
${JSON.stringify(data, null, 2)}
                    </pre>
                `;
            } catch (error) {
                resultDiv.innerHTML = `
                    âŒ Ø®Ø·Ø§ Ø¯Ø± ØªØ³Øª
                    <br><br>
                    <strong>Endpoint:</strong> /api/${endpoint}
                    <br>
                    <strong>Error:</strong> ${error.message}
                `;
            }
        }
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', checkBackend);
    </script>
</body>
</html>
